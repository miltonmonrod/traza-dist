webpackJsonp([2],{HDq8:function(e,o){e.exports=""},psUF:function(e,o){e.exports='<simple-notifications [options]="options"></simple-notifications>\n\x3c!-- <ng-template [ngIf]="_usuario.UsuarioRolID==\'admin\'" [ngIfElse]="noautorizado" > --\x3e\n<div class="row">\n    <div class="col-sm-12">\n        \x3c!-- Panel card start --\x3e\n        <app-card [title]="\'Instrucciones para realizar el reporte\'" [blockClass]="\'panels-wells\'" [cardOptionBlock]="true">\n            <div class="row">\n                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12">\n                    <div class="panel panel-primary">\n                        <div class="panel-heading bg-primary">\n                            Por favor leer las instruciones antes de continuar con el proceso\n                        </div>\n                        <div class="panel-body">\n                            <p>Definir el texto de las instrucciones en esta franja\n                            </p>\n                        </div>\n                        <div class="panel-footer text-primary">\n                            <div class="row">\n                                <div class="col-sm-6">\n                                    <a *ngIf="reporte.idreportetipoproducto !== -1" style="cursor:pointer;" (click)="verArchivo()">Descargar\n                                        formato establecido para el cargue</a>\n                                </div>\n                                <div class="col-sm-6">\n                                    <div class="text-right">\n                                        <a style="cursor:pointer;">Descargar instructivo</a>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <br/>\n            <div *ngIf="msjCargue !== \'\'" class="alert alert-success background-success">\n                <button type="button" class="close" appRemoveAlert>\n                    <i class="icofont icofont-close-line-circled text-white"></i>\n                </button>\n                <strong>{{msjCargue}}</strong>\n            </div>\n            <br/>\n            <form #formTrazaProd="ngForm">\n                <div class="row">\n                    <div class="col-sm-12">\n                        <div class="form-group row">\n                            <label class="col-sm-4 col-form-label">* Tipo producto:</label>\n                            <div class="col-sm-8">\n                                <select class="form-control" name="idtipoproducto" #idtipoproducto\n                                    [(ngModel)]="reporte.idtipoproducto" (change)="cargarClasificacion()">\n                                    <option *ngFor="let item of ListaTipoProducto" [ngValue]="item.Id">{{item.Nombre}}</option>\n                                </select>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="col-sm-12">\n                        <div class="form-group row">\n                            <label class="col-sm-4 col-form-label">* Clasificaci\xf3n tipo producto:</label>\n                            <div class="col-sm-8">\n                                <select class="form-control" name="idclasiftipoproductorep" #idclasiftipoproductorep \n                                    [(ngModel)]="reporte.idclasiftipoproductorep" (change)="cargarDescargarFormatos()">\n                                    <option value="-1">-- Seleccione la clasificaci\xf3n del tipo producto --</option>\n                                    <option *ngFor="let item of ListaClasificaTipoProducto" [ngValue]="item.idclasiftipoproductorep">{{item.nombreclasificacion}}</option>\n                                </select>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="col-sm-12">\n                        <div class="form-group row">\n                            <label class="col-sm-4 col-form-label">* Vigencia:</label>\n                            <div class="col-sm-8">\n                                <select class="form-control" name="aniovigencia" #aniovigencia [(ngModel)]="reporte.aniovigencia">\n                                    <option *ngFor="let item of ListaVigencia" [ngValue]="item.Id">{{item.Nombre}}</option>\n                                </select>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="col-sm-12">\n                        <div class="form-group row">\n                            <label class="col-sm-4 col-form-label">* Mes:</label>\n                            <div class="col-sm-8">\n                                <select class="form-control" name="mesvigencia" #mesvigencia [(ngModel)]="reporte.mesvigencia">\n                                    <option *ngFor="let item of ListaMeses" [ngValue]="item.Id">{{item.Nombre}}</option>\n                                </select>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="col-sm-12" *ngIf="reporte.aniovigencia !== null && reporte.mesvigencia !== null && reporte.idtipoproducto !== -1 && reporte.idclasiftipoproductorep !== -1">\n                        <div class="form-group row">\n                            <label class="col-sm-4 col-form-label">* Seleccione el archivo a cargar:</label>\n                            <div class="col-sm-4">\n                                <dx-file-uploader #fileUploader uploadUrl={{url}} [multiple]="false" accept=".zip" [(value)]="value" uploadMode="useButtons"\n                                    labelText="o arrastrar archivo zip" selectButtonText="Seleccionar archivo" (onValueChanged)="addIdParameter($event)"\n                                    uploadButtonText="Subir" readyToUploadMessage="Listo para subir" uploadFailedMessage="Ocurrio un error al subir el archivo"\n                                    (onUploaded)="subidaCompleta($event)"></dx-file-uploader>\n                            </div>\n                            <div class="col-sm-4">\n                                <div *ngIf="value.length > 0">\n                                    <h5 class="sub-title">Archivo seleccionado</h5>\n                                </div>\n                                <div *ngFor="let file of value">\n                                    <div class="selected-item">\n                                        Nombre:\n                                        <span>{{file.name}}</span>\n                                        <br /> Tama\xf1o:\n                                        <span>{{file.size}}</span>bytes\n                                        <br /> Tipo:\n                                        <span>{{file.type}}</span>\n                                        <br /> Fecha ultima modificaci\xf3n:\n                                        <span>{{file.lastModifiedDate}}</span>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </form>\n        </app-card>\n    </div>\n</div>'},uaa0:function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var i=t("WT6e"),r=t("Xjw4"),a=t("7DMc"),s=t("WPXp"),n=t("aAKi"),c=t("T+dH"),l=t("HCek"),d=t("EpbT"),p=t("EAH6"),u=this&&this.__decorate||function(e,o,t,i){var r,a=arguments.length,s=a<3?o:null===i?i=Object.getOwnPropertyDescriptor(o,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,o,t,i);else for(var n=e.length-1;n>=0;n--)(r=e[n])&&(s=(a<3?r(s):a>3?r(o,t,s):r(o,t))||s);return a>3&&s&&Object.defineProperty(o,t,s),s},m=this&&this.__metadata||function(e,o){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,o)},v=function(){function e(e,o,t){this.parametricasService=e,this.storageService=o,this.servicePNotify=t,this.options={position:["bottom","right"]},this.value=[],this.inicializarModelo(),this.ListaVigencia=[{Id:null,Nombre:"-- Seleccione una vigencia --"},{Id:2018,Nombre:"2018"}],this.ListaMeses=[{Id:null,Nombre:"-- Seleccione un mes --"},{Id:1,Nombre:"Enero"},{Id:2,Nombre:"Febrero"},{Id:3,Nombre:"Marzo"},{Id:4,Nombre:"Abril"},{Id:5,Nombre:"Mayo"},{Id:6,Nombre:"Junio"},{Id:7,Nombre:"Julio"},{Id:8,Nombre:"Agosto"},{Id:9,Nombre:"Septiembre"},{Id:10,Nombre:"Octubre"},{Id:11,Nombre:"Noviembre"},{Id:12,Nombre:"Diciembre"}],this.ListaTipoProducto=[{Id:-1,Nombre:"-- Seleccione el tipo producto --"},{Id:1,Nombre:"Medicamentos"},{Id:2,Nombre:"Dispositivos m\xe9dicos y equipos biom\xe9dicos"},{Id:3,Nombre:"Alimentos"},{Id:4,Nombre:"Cosm\xe9ticos"},{Id:5,Nombre:"Producto de higiene dom\xe9stica"},{Id:6,Nombre:"Reactivos de diagn\xf3stico in-vitro"},{Id:7,Nombre:"Bebidas alcoholicas"},{Id:8,Nombre:"Reactivos in Vitro"},{Id:9,Nombre:"Producto absorbente de higiene personal"}],this.url=d.a.Url_upload+"upload/report"}return e.prototype.ngAfterViewInit=function(){this.options={position:["bottom","right"],maxStack:8,timeOut:5e3,showProgressBar:!0,pauseOnHover:!0,lastOnBottom:!0,clickToClose:!0,preventDuplicates:!1,preventLastDuplicates:!1,theClass:"bg-c-pink no-icon",rtl:!1,animate:"rotate"}},e.prototype.ngOnInit=function(){},e.prototype.verArchivo=function(){var e=this;this.parametricasService.getCsvByTipoReporteId(this.reporte.idreportetipoproducto).subscribe(function(o){o.operacionExitosa?(e.columnas=[],e.columnas.push(o.columnas),e.exportToCsv(o.nombreArchivo,e.columnas)):e.servicePNotify.html("<h4>Error al consutruir el archivo <p>"+o.mensaje+"</p></h4>","error")},function(o){e.error=o,"Unauthorized"===e.error.statusText&&e.storageService.logout(),console.log(o)})},e.prototype.exportToCsv=function(e,o){for(var t=function(e){for(var o="",t=0;t<e.length;t++){var i=null===e[t]?"":e[t].toString();e[t]instanceof Date&&(i=e[t].toLocaleString());var r=i.replace(/"/g,'""');r.search(/("|,|\n)/g)>=0&&(r='"'+r+'"'),t>0&&(o+=";"),o+=r}return o+"\n"},i="",r=0;r<o.length;r++)i+=t(o[r]);var a=new Blob(["\ufeff",i],{type:"text/csv;charset=UTF-8;"});if(navigator.msSaveBlob)navigator.msSaveBlob(a,e);else{var s=document.createElement("a");if(void 0!==s.download){var n=URL.createObjectURL(a);s.setAttribute("href",n),s.setAttribute("download",e),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s)}}},e.prototype.inicializarModelo=function(){this.reporte={idreporte:0,idtipoproducto:-1,idclasiftipoproductorep:-1,idreportetipoproducto:-1,aniovigencia:null,mesvigencia:null,idsucursal:this.storageService.getCurrentSession().idsucursal,idusuario:this.storageService.getCurrentSession().idusuario},this.msjCargue=""},e.prototype.cargarClasificacion=function(){var e=this;this.parametricasService.findClasificaByTipoProducto(this.reporte.idtipoproducto).subscribe(function(o){e.ListaClasificaTipoProducto=o,e.reporte.idclasiftipoproductorep=-1},function(o){e.error=o,"Unauthorized"===o.statusText&&(e.servicePNotify.error("TRAZA","Se perdio la sesi\xf3n, por favor loguearse de nuevo",""),e.storageService.logout()),console.log(o)})},e.prototype.cargarDescargarFormatos=function(){},e.prototype.subidaCompleta=function(e){var o=this;"Success"===e.request.response.split("|")[0]?(this.msjCargue="Se\xf1or usuario su informaci\xf3n ha sido recibida por el INVIMA, sus n\xfameros de identificador son ("+e.request.response.split("|")[2]+"), los archivos ser\xe1n validados y procesados, los resultados del proceso ser\xe1n notificados a trav\xe9s del correo electr\xf3nico asociado al usuario autenticado.",setTimeout(function(){o.servicePNotify.html("<h4>Subida de datos</h4><p>Los archivos se han subido correctamente!</p>","info")},15)):(this.msj=e.request.response.split("|")[1],this.msjCargue="",this.texto="","EstructuraArc"===this.msj?this.texto="Los archivos no contiene la estructura de nombres establecida.":"YaExiste"===this.msj?this.texto="Ya existe un reporte para la sucursal, tipo producto, a\xf1o y mes seleccionado.":"Ext"===this.msj?this.texto="El archivo a cargar debe ser un zip.":"Mes"===this.msj?this.texto="El mes a reportar ya se encuentra cerrado.":this.texto=this.msj,setTimeout(function(){o.servicePNotify.error("Subida de datos",o.texto)},25)),this.uploader.instance.reset()},e.prototype.addIdParameter=function(e){this.url=d.a.Url_upload+"upload/report?aniovigencia="+this.reporte.aniovigencia+"&mesvigencia="+this.reporte.mesvigencia+"&idclasiftipoproductorep="+this.reporte.idclasiftipoproductorep+"&idsucursal="+this.reporte.idsucursal+"&idusuario="+this.reporte.idusuario},u([Object(i.ViewChild)(p.DxFileUploaderComponent),m("design:type",p.DxFileUploaderComponent)],e.prototype,"uploader",void 0),e=u([Object(i.Component)({selector:"app-contratos",template:t("psUF"),styles:[t("HDq8"),t("3FNq")],animations:[Object(s.trigger)("fadeInOutTranslate",[Object(s.transition)(":enter",[Object(s.style)({opacity:0}),Object(s.animate)("400ms ease-in-out",Object(s.style)({opacity:1}))]),Object(s.transition)(":leave",[Object(s.style)({transform:"translate(0)"}),Object(s.animate)("400ms ease-in-out",Object(s.style)({opacity:0}))])])],providers:[n.a]}),m("design:paramtypes",[n.a,c.a,l.NotificationsService])],e)}(),f=t("bfOx"),b=this&&this.__decorate||function(e,o,t,i){var r,a=arguments.length,s=a<3?o:null===i?i=Object.getOwnPropertyDescriptor(o,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,o,t,i);else for(var n=e.length-1;n>=0;n--)(r=e[n])&&(s=(a<3?r(s):a>3?r(o,t,s):r(o,t))||s);return a>3&&s&&Object.defineProperty(o,t,s),s},g=[{path:"",component:v,data:{title:"Reporte traza por producto",icon:"ti-user",caption:"Reporte periodico TRAZA por producto",status:!0}}],h=function(){function e(){}return e=b([Object(i.NgModule)({imports:[f.g.forChild(g)],exports:[f.g]})],e)}(),y=t("fAE3"),I=t("oHSm"),x=t("ItHS"),N=t("DtvI");t.d(o,"TrazaXproductoModule",function(){return C});var j=this&&this.__decorate||function(e,o,t,i){var r,a=arguments.length,s=a<3?o:null===i?i=Object.getOwnPropertyDescriptor(o,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,o,t,i);else for(var n=e.length-1;n>=0;n--)(r=e[n])&&(s=(a<3?r(s):a>3?r(o,t,s):r(o,t))||s);return a>3&&s&&Object.defineProperty(o,t,s),s},C=function(){function e(){}return e=j([Object(i.NgModule)({imports:[r.CommonModule,a.FormsModule,a.ReactiveFormsModule,h,y.a,I.NgxDatatableModule,p.DxDataGridModule,p.DxButtonModule,p.DxListModule,p.DxSelectBoxModule,p.DxFileUploaderModule,l.SimpleNotificationsModule.forRoot()],providers:[{provide:x.HTTP_INTERCEPTORS,useClass:N.a,multi:!0}],declarations:[v]})],e)}()}});