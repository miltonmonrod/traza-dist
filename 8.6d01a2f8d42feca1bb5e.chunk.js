webpackJsonp([8],{EWXr:function(o,a){o.exports='<simple-notifications [options]="options"></simple-notifications>\r\n\x3c!-- <ng-template [ngIf]="_usuario.UsuarioRolID==\'admin\'" [ngIfElse]="noautorizado" > --\x3e\r\n<div class="page-body">\r\n  \x3c!--profile cover end--\x3e\r\n  <div class="row" *ngIf="displayLista">\r\n    <div class="col-lg-12">\r\n      <button type="button" (click)="showPanel(\'C\')" class="btn btn-primary m-b-0">Crear nuevo campo</button>\r\n    </div>\r\n  </div>\r\n  <br/>\r\n  <div class="row">\r\n    <div class="col-sm-12">\r\n      <app-card *ngIf="displayLista" [title]="\'Consulta campos reporte TRAZA por producto\'" [cardOptionBlock]="true">\r\n        <dx-data-grid id="gridContainer" [dataSource]="njLista" showBorders="true" [columnAutoWidth]="true" [rowAlternationEnabled]="true">\r\n          <dxo-export [enabled]="true" fileName="Bolsa de campos"></dxo-export>\r\n          <dxo-filter-row [visible]="true"></dxo-filter-row>\r\n          <dxo-header-filter [visible]="true"></dxo-header-filter>\r\n          <dxo-group-panel [visible]="true" emptyPanelText="Arrastra una columna aqu\xed para agrupar por ella"></dxo-group-panel>>\r\n          <dxo-search-panel [visible]="true" [width]="240" placeholder="Buscar..."></dxo-search-panel>\r\n          <dxi-column caption="Acciones" cellTemplate="accionCellTemplate"></dxi-column>\r\n          <dxi-column dataField="idconfigcamposreporte" caption="ID" visible="false"></dxi-column>\r\n          <dxi-column dataField="nombrecampo" caption="Nombre"></dxi-column>\r\n          <dxi-column dataField="nombretipoformato" caption="Nombre tipo formato"></dxi-column>\r\n          <dxi-column dataField="longitud" caption="Longitud"></dxi-column>\r\n          <dxi-column dataField="nombretipocampo" caption="Nombre tipo campo"></dxi-column>\r\n          <dxi-column dataField="destinovalidacion" caption="Destino validaci\xf3n"></dxi-column>\r\n          <dxi-column dataField="nombretipovalidacion" caption="Nombre tipo validaci\xf3n"></dxi-column>\r\n          <dxi-column dataField="indobligatoriedad" caption="\xbfObligatorio?"></dxi-column>\r\n          <dxi-column dataField="nombrelistavalores" caption="Nombre lista valores"></dxi-column>\r\n          <dxi-column dataField="nombreestado" caption="Estado"></dxi-column>\r\n          <dxi-column dataField="fechacreacionformat" caption="Fecha creaci\xf3n"></dxi-column>\r\n          <dxi-column dataField="usuariocreacion" caption="Usuario creaci\xf3n"></dxi-column>\r\n          <dxo-remote-operations [sorting]="true" [paging]="true">\r\n          </dxo-remote-operations>\r\n          <dxo-summary>\r\n            <dxi-total-item column="idconfigcamposreporte" summaryType="count" displayFormat="Cantidad: {0}">\r\n            </dxi-total-item>\r\n          </dxo-summary>\r\n          <dxo-paging [pageSize]="10"></dxo-paging>\r\n          <dxo-pager [showPageSizeSelector]="true" [allowedPageSizes]="[10, 20, 40]"></dxo-pager>\r\n          <div *dxTemplate="let d of \'accionCellTemplate\'">\r\n            <div class="button-cell" style="text-align: center;">\r\n              <i style="font-size:20px; cursor:pointer;" class="icofont icofont-law-document" placement="right" ngbTooltip="Actualizar"\r\n                (click)="cargarEditCampo(d.data.idconfigcamposreporte)"></i>\r\n            </div>\r\n          </div>\r\n        </dx-data-grid>\r\n      </app-card>\r\n    </div>\r\n    <div class="col-sm-12">\r\n      <app-card *ngIf="displayCrear" [title]="\'Crear campo nuevo\'" [blockClass]="\'box-list m-t-15\'">\r\n        <form #formCc="ngForm" (ngSubmit)="onSubmit(formCc.valid)">\r\n          <div class="row">\r\n            <div class="col-sm-12">\r\n              <div class="form-group row">\r\n                <label class="col-sm-4 col-form-label">* Nombre del campo:</label>\r\n                <div class="col-sm-8">\r\n                  <input type="text" class="form-control" [class.form-control-danger]="(formCc.submitted && nombrecampo.invalid) || (nombrecampo.touched && nombrecampo.invalid)"\r\n                    name="nombrecampo" #nombrecampo="ngModel" [(ngModel)]="campo.nombrecampo" required>\r\n                </div>\r\n              </div>\r\n              <div class="form-group row">\r\n                <label class="col-sm-4 col-form-label">* Tipo formato:</label>\r\n                <div class="col-sm-8">\r\n                  <select class="form-control" required [class.form-control-danger]="class_codtipoformato"\r\n                    name="codtipoformato" #codtipoformato [(ngModel)]="campo.codtipoformato" (change)="class_codtipoformato = campo.codtipoformato === null;">\r\n                    <option *ngFor="let item of ListaFormato" [ngValue]="item.Id">{{item.Nombre}}</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n              <div class="form-group row">\r\n                <label class="col-sm-4 col-form-label">* Tipo campo:</label>\r\n                <div class="col-sm-8">\r\n                  <select class="form-control" required [class.form-control-danger]="class_codtipocampo"\r\n                    name="codtipocampo" #codtipocampo [(ngModel)]="campo.codtipocampo" (change)="class_codtipocampo = campo.codtipocampo === \'\';campo.codlistavalores = null;">\r\n                    <option *ngFor="let item of ListaTipoCampo" [ngValue]="item.Id">{{item.Nombre}}</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n              <div class="form-group row" *ngIf="campo.codtipocampo === \'2\'">\r\n                <label class="col-sm-4 col-form-label">* Lista de valores:</label>\r\n                <div class="col-sm-8">\r\n                  <select class="form-control" required [class.form-control-danger]="class_codlistavalores"\r\n                    name="codlistavalores" #codlistavalores [(ngModel)]="campo.codlistavalores" (change)="class_codlistavalores = campo.codlistavalores === null;">\r\n                    <option *ngFor="let item of ListaValores" [ngValue]="item.Id">{{item.Nombre}}</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n              <div class="form-group row">\r\n                <label class="col-sm-4 col-form-label">* Longitud:</label>\r\n                <div class="col-sm-8">\r\n                  <input type="number" class="form-control" [class.form-control-danger]="(formCc.submitted && longitud.invalid) || (longitud.touched && longitud.invalid)"\r\n                    name="longitud" #longitud="ngModel" [(ngModel)]="campo.longitud" required>\r\n                </div>\r\n              </div>\r\n              <div class="form-group row">\r\n                <label class="col-sm-4 col-form-label">* Obligatorio:</label>\r\n                <div class="col-sm-8">\r\n                  <select class="form-control" required [class.form-control-danger]="class_indobligatoriedad"\r\n                    name="indobligatoriedad" #indobligatoriedad [(ngModel)]="campo.indobligatoriedad" (change)="class_indobligatoriedad = campo.indobligatoriedad === \'\'">\r\n                    <option *ngFor="let item of ListaObli" [ngValue]="item.Id">{{item.Nombre}}</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n              <div class="form-group row">\r\n                <label class="col-sm-4 col-form-label">* Indicador de validaci\xf3n:</label>\r\n                <div class="col-sm-8">\r\n                  <select class="form-control" required [class.form-control-danger]="class_destinovalidacion"\r\n                    name="destinovalidacion" #destinovalidacion [(ngModel)]="campo.destinovalidacion" (change)="class_destinovalidacion = campo.destinovalidacion === \'\'; campo.codtipovalidacion = null;">\r\n                    <option *ngFor="let item of ListaObli" [ngValue]="item.Id">{{item.Nombre}}</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n              <div class="form-group row" *ngIf="campo.destinovalidacion === \'S\'">\r\n                <label class="col-sm-4 col-form-label">* Servicios de validaci\xf3n:</label>\r\n                <div class="col-sm-8">\r\n                  <select class="form-control" required [class.form-control-danger]="class_codtipovalidacion"\r\n                    name="codtipovalidacion" #codtipovalidacion [(ngModel)]="campo.codtipovalidacion" (change)="class_codtipovalidacion = campo.codtipovalidacion === null;">\r\n                    <option *ngFor="let item of ListaValidaciones" [ngValue]="item.Id">{{item.Nombre}}</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n              <div class="form-group row">\r\n                <label class="col-sm-4 col-form-label">* Estado:</label>\r\n                <div class="col-sm-8">\r\n                  <select class="form-control" required [class.form-control-danger]="class_estado"\r\n                    name="estado" #estado [(ngModel)]="campo.estado" (change)="class_estado = campo.estado === \'\'">\r\n                    <option *ngFor="let item of ListaEstado" [ngValue]="item.Id">{{item.Nombre}}</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-sm-12">\r\n              <button type="submit" class="btn btn-primary m-b-0">Guardar</button>\r\n              <button type="button" (click)="showPanel(\'V\')" class="btn btn-primary m-b-0">Volver</button>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </app-card>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\x3c!-- </ng-template>\r\n<ng-template #noautorizado>\r\n  <div class="page-body">\r\n    <div class="row">\r\n      <div class="col-lg-12">\r\n          <div class="alert alert-danger background-danger">\r\n              <button type="button" class="close" >\r\n                <i class="icofont icofont-close-line-circled text-white"></i>\r\n              </button>\r\n              <strong>Acceso no autorizado!</strong> usted no tiene permiso para ingresar a este modulo\r\n            </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</ng-template> --\x3e'},WQQg:function(o,a){o.exports=""},X8o4:function(o,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=i("WT6e"),t=i("Xjw4"),r=i("7DMc"),n=i("WPXp"),s=i("aAKi"),c=i("T+dH"),l=i("HCek"),d=this&&this.__decorate||function(o,a,i,e){var t,r=arguments.length,n=r<3?a:null===e?e=Object.getOwnPropertyDescriptor(a,i):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(o,a,i,e);else for(var s=o.length-1;s>=0;s--)(t=o[s])&&(n=(r<3?t(n):r>3?t(a,i,n):t(a,i))||n);return r>3&&n&&Object.defineProperty(a,i,n),n},m=this&&this.__metadata||function(o,a){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,a)},p=function(){function o(o,a,i){this.parametricasService=o,this.storageService=a,this.servicePNotify=i,this.operacionConfCampos="C",this.options={position:["bottom","right"]},this.inicializarModelo(),this.displayLista=!0,this.displayCrear=!1,this.ListaFormato=[{Id:null,Nombre:"-- Seleccione un tipo formato --"},{Id:4948,Nombre:"Alfanum\xe9rico"},{Id:4949,Nombre:"Fecha (dd/mm/aaaa)"},{Id:4950,Nombre:"Num\xe9rico"}],this.ListaTipoCampo=[{Id:"",Nombre:"-- Seleccione un tipo de campo --"},{Id:"1",Nombre:"Campo abierto"},{Id:"2",Nombre:"Lista de selecci\xf3n \xfanica"}],this.ListaValores=[{Id:null,Nombre:"-- Seleccione una lista de valores --"},{Id:230,Nombre:"Describe las condiciones de almacenamiento que deben seguir algunos Alimentos"},{Id:231,Nombre:"Lista las entidades que en Colombia otorgan la Certificaci\xf3n HACCP"},{Id:233,Nombre:"Lista de respuesta simple"}],this.ListaObli=[{Id:"",Nombre:"-- Seleccione una opci\xf3n --"},{Id:"S",Nombre:"SI"},{Id:"N",Nombre:"NO"}],this.ListaEstado=[{Id:"",Nombre:"-- Seleccione el estado --"},{Id:"A",Nombre:"Activo"},{Id:"I",Nombre:"Inactivo"}],this.ListaValidaciones=[{Id:null,Nombre:"-- Seleccione un servicio para validar el campo a ingresar --"},{Id:4951,Nombre:"Microservicio existe registro sanitario INVIMA"}]}return o.prototype.ngAfterViewInit=function(){this.options={position:["bottom","right"],maxStack:8,timeOut:5e3,showProgressBar:!0,pauseOnHover:!0,lastOnBottom:!0,clickToClose:!0,preventDuplicates:!1,preventLastDuplicates:!1,theClass:"bg-c-pink no-icon",rtl:!1,animate:"rotate"}},o.prototype.ngOnInit=function(){this.getConfigCampos()},o.prototype.getConfigCampos=function(){var o=this;this.parametricasService.getAllConfCampos().subscribe(function(a){o.njLista=a},function(a){o.error=a,"Unauthorized"===a.statusText&&(o.servicePNotify.error("TRAZA","Se perdio la sesi\xf3n, por favor loguearse de nuevo",""),o.storageService.logout()),console.log(a)})},o.prototype.onSubmit=function(o){var a=this;this.class_codtipoformato=null===this.campo.codtipoformato,this.class_codtipocampo=""===this.campo.codtipocampo,this.class_codlistavalores=null===this.campo.codlistavalores,this.class_indobligatoriedad=""===this.campo.indobligatoriedad,this.class_estado=""===this.campo.estado,this.class_destinovalidacion=""===this.campo.destinovalidacion,this.class_codtipovalidacion=null===this.campo.codtipovalidacion,!o||this.class_codtipoformato||this.class_codtipocampo||this.class_codlistavalores&&"2"===this.campo.codtipocampo||this.class_indobligatoriedad||this.class_estado||this.class_destinovalidacion||this.class_codtipovalidacion&&"S"===this.campo.destinovalidacion||("C"===this.operacionConfCampos?this.parametricasService.addConfCampos(this.campo).subscribe(function(o){o.operacionExitosa?(a.servicePNotify.html("<h4>Guardado de datos</h4><p>Los datos se han guardado correctamente!</p>","info"),a.inicializarModelo()):a.servicePNotify.html("<h4>Error al salvar los datos <p>"+o.mensaje+"</p></h4>","error")},function(o){a.error=o,"Unauthorized"===a.error.statusText&&a.storageService.logout(),console.log(o)}):"U"===this.operacionConfCampos&&this.parametricasService.updateConfCampos(this.campo).subscribe(function(o){o.operacionExitosa?(a.servicePNotify.html("<h4>Guardado de datos</h4><p>Los datos se han editado correctamente!</p>","info"),a.showPanel("V")):a.servicePNotify.html("<h4>Error al salvar los datos <p>"+o.mensaje+"</p></h4>","error")},function(o){a.error=o,"Unauthorized"===a.error.statusText&&a.storageService.logout(),console.log(o)}))},o.prototype.cargarEditCampo=function(o){var a=this;this.operacionConfCampos="U",this.parametricasService.getConfCampoById(o).subscribe(function(o){a.campo=o,a.displayLista=!1,a.displayCrear=!0},function(o){a.error=o,"Unauthorized"===o.statusText&&(a.servicePNotify.error("TRAZA","Se perdio la sesi\xf3n, por favor loguearse de nuevo",""),a.storageService.logout()),console.log(o)})},o.prototype.showPanel=function(o){"C"===o?(this.displayLista=!1,this.displayCrear=!0,this.inicializarModelo()):"V"===o&&(this.displayLista=!0,this.displayCrear=!1,this.inicializarModelo(),this.getConfigCampos())},o.prototype.inicializarModelo=function(){this.campo={idconfigcamposreporte:0,nombrecampo:"",codtipoformato:null,codtipocampo:"",nombretipoformato:"",longitud:null,nombretipovalidacion:"",codtipovalidacion:null,destinovalidacion:"",indobligatoriedad:"",nombrelistavalores:"",codlistavalores:null,nombreestado:"",estado:"",fechacreacion:null,fechacreacionformat:"",usuariocreacion:"",fechamodificacion:null,fechamodificacionformat:"",usuariomodificacion:"",fechainivigencia:new Date,fechafinvigencia:null},this.class_codtipoformato=!1,this.class_codtipocampo=!1,this.class_codlistavalores=!1,this.class_indobligatoriedad=!1,this.class_estado=!1,this.class_destinovalidacion=!1,this.class_codtipovalidacion=!1,this.operacionConfCampos="C"},o=d([Object(e.Component)({selector:"app-contratos",template:i("EWXr"),styles:[i("WQQg"),i("3FNq")],animations:[Object(n.trigger)("fadeInOutTranslate",[Object(n.transition)(":enter",[Object(n.style)({opacity:0}),Object(n.animate)("400ms ease-in-out",Object(n.style)({opacity:1}))]),Object(n.transition)(":leave",[Object(n.style)({transform:"translate(0)"}),Object(n.animate)("400ms ease-in-out",Object(n.style)({opacity:0}))])])],providers:[s.a]}),m("design:paramtypes",[s.a,c.a,l.NotificationsService])],o)}(),u=i("bfOx"),f=this&&this.__decorate||function(o,a,i,e){var t,r=arguments.length,n=r<3?a:null===e?e=Object.getOwnPropertyDescriptor(a,i):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(o,a,i,e);else for(var s=o.length-1;s>=0;s--)(t=o[s])&&(n=(r<3?t(n):r>3?t(a,i,n):t(a,i))||n);return r>3&&n&&Object.defineProperty(a,i,n),n},v=[{path:"",component:p,data:{title:"Parametricas",icon:"ti-user",caption:"Administraci\xf3n de parametricas del sistema TRAZA",status:!0}}],g=function(){function o(){}return o=f([Object(e.NgModule)({imports:[u.g.forChild(v)],exports:[u.g]})],o)}(),b=i("fAE3"),h=i("oHSm"),x=i("EAH6"),y=i("ItHS"),C=i("DtvI");i.d(a,"ParametricasModule",function(){return I});var N=this&&this.__decorate||function(o,a,i,e){var t,r=arguments.length,n=r<3?a:null===e?e=Object.getOwnPropertyDescriptor(a,i):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(o,a,i,e);else for(var s=o.length-1;s>=0;s--)(t=o[s])&&(n=(r<3?t(n):r>3?t(a,i,n):t(a,i))||n);return r>3&&n&&Object.defineProperty(a,i,n),n},I=function(){function o(){}return o=N([Object(e.NgModule)({imports:[t.CommonModule,r.FormsModule,r.ReactiveFormsModule,g,b.a,h.NgxDatatableModule,x.DxDataGridModule,x.DxButtonModule,l.SimpleNotificationsModule.forRoot()],providers:[{provide:y.HTTP_INTERCEPTORS,useClass:C.a,multi:!0}],declarations:[p]})],o)}()}});